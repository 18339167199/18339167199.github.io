<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Join DRmare Halloween Party to Get Free Gifts & 60% Off Offers </title>
  <link rel="stylesheet" href="../../assets/bootstrap-3.3.7-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="Shortcut Icon" href="../../images/drmare.ico" />
  <link rel="Bookmark" href="../../images/drmare.ico" />
  <link rel="canonical" href="https://www.drmare.com/special/2020-halloween-sales/" />
  <script>
    function preload() {
      var imgs = arguments[0];
      for (var i = 0; i < imgs.length; i++) {
        var img = new Image();
        img.src = imgs[i];
      }
    }

    preload([
      './images/interaction/rules/bg.png',
      './images/interaction/share/bg.png',
      './images/interaction/success/bg.png',
      './images/interaction/tricker/bg.png'
    ])

    // new Image().src = './images/interaction/rules/bg.png';
    // // new Image()/src = './'
  </script>
</head>

<body class="halloween-2020 absolute-header disable_top_banner">
  <!-- Special Fullbanner BEGIN -->
  <div class="special-fullbanner">
    <h1>
      <span>2020 Halloween Sale Up to 60% Off</span>
      <picture>
        <source class="img" type="image/webp" srcset="./images/banner/Tricks-or-Treats.webp">
        <img class="img" src="./images/banner/Tricks-or-Treats.png" alt="drmare halloween special offer 2020"
          width="1053" height="561">
      </picture>
    </h1>

    <div class="end-time">
      Ends on Nov 10, 2020
    </div>

    <div class="product-link">
      <div class="container clearfix">
        <div class="link-content">
          <div class="item">
            <div class="content">
              <a class="cry-ghost" href="#trick">
                <img src="./images/nav/Trick-or-Treat.png" alt="Trick-or-Treat" width="240" height="40">
              </a>
            </div>
          </div>
          <div class="item">
            <div class="content">
              <a class="smile-ghost animation-delay-50" href="#audiocapture">
                <img src="./images/nav/60-Off.png" alt="60 off" width="240" height="74">
              </a>
            </div>
          </div>
          <div class="item">
            <div class="content">
              <a class="cry-ghost animation-delay-100" href="#deals">
                <img src="./images/nav/40-Off.png" alt="40 off" width="240" height="71">
              </a>
            </div>
          </div>
          <div class="item">
            <div class="content">
              <a class="smile-ghost animation-delay-150" href="#gift">
                <img src="./images/nav/Free-Halloween-Gift.png" alt="Free-Halloween-Gift" width="240" height="81">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Special Fullbanner END -->

  <!-- Content Wrap BEGIN -->
  <div class="content-wrap">

    <div class="knock" id="knock">
      <div class="container">
        <h2 class="title" id="trick">
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/title.webp">
            <img src="./images/interaction/knock/title.png" alt="knock the Grove to Get a Trick or Win a Treat">
          </picture>
        </h2>
        <div class="content">
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/tombstone.webp">
            <img class="tombstone" id="knock-tombstone" src="./images/interaction/knock/tombstone.png" alt="tombstone">
          </picture>
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/Knock.webp">
            <img class="btn loading" id="knock-btn" src="./images/interaction/knock/Knock.png" alt="knock">
          </picture>
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/hand-human.webp">
            <img class="hand" id="knock-hand" src="./images/interaction/knock/hand-human.png" alt="hand">
          </picture>
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/ghost-hand.webp">
            <img class="ghost-hand" id="knock-ghost-hand" src="./images/interaction/knock/ghost-hand.png"
              alt="ghost hand">
          </picture>
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/mound.webp">
            <img class="mound" id="knock-mound" src="./images/interaction/knock/mound.png" alt="mound">
          </picture>
          <picture>
            <source class="img" type="image/webp" srcset="./images/interaction/knock/webp/Rules-Fire-red.webp">
            <img class="rule" id="knock-rule" src="./images/interaction/knock/Rules-Fire-red.png" alt="rules">
          </picture>
          <div class="rule-detail" id="knock-rule-detail">
            <div class="close-wrap clearfix"><a class="close" id="knock-rule-close" href="javascript:void(0)"></a></div>
            <ol>
              <li>The activity begins from October 23 to November 10, 2020 PST, worldwide.</li>
              <li>Everyone has an opportunity to participate in the activity once a day.</li>
              <li>Share this webpage to Facebook or Twitter will get one more chance to knock.</li>
              <li>Campaign Prizes: $100 iTunes Gift Card x 2，Single license of Spotify Music Converter（180 Days）x
                10，Single license of Tidal Music Converter（180 Days）x 10, Single license of Audio Converter（180 Days）x
                10</li>
              <li>Prizes will be issued in this page after the activity.</li>
              <li>Information provided by the participants will only be used on this page.</li>
              <li>Please send email to support@drmare.com if you have any problem.</li>
              <li>DRmare reserves the right of final explanation for this activity.</li>
            </ol>
          </div>
          <div class="lucky" id="knock-lucky">
            <div class="close-wrap clearfix"><a class="close" id="knock-lucky-close" href="javascript:void(0)"></a>
            </div>
            <div class="award-box">
              <div class="img">
                <img class="knock-award-img" src="./images/interaction/award/Converter-for-Spotify-mac.png" alt="award">
              </div>
              <h2 class="knock-award-title">Single License of Spotify Music Convert (180 Days)</h2>
              <div class="select">
                <p>Choose the right version you want</p>
                <div class="version" id="knock-version">
                  <div class="mac check" data-version='mac'>
                    <i></i><span>Mac</span>
                  </div>
                  <div class="win" data-version="win">
                    <i></i><span>Windows</span>
                  </div>
                </div>
                <form onsubmit="javascript: return false" action="#" id="knock-form">
                  <input type="text" ga-type="special" ga-ec="2020Halloween" ga-ea="email_input">
                  <button ga-type="special" ga-ec="2020Halloween" ga-ea="email_submit">Submit</button>
                </form>
              </div>
            </div>
            <div class="success-box">
              <img src="./images/interaction/success/success.png" alt="success">
              <p>You have submitted successfully!</p>
              <p>An email was sent with instructions for accessing your account.</p>
            </div>
          </div>
          <div class="trick" id="knock-trick">
            <div class="close-wrap clearfix"><a class="close" id="knock-trick-close" href="javascript:void(0)"></a>
            </div>
            <img src="./images/interaction/tricker/pic.png" alt="trick">
            <p>I wave my wand and put on my cape and wish you lots of treats and success coming your way. Happy
              Halloween!</p>
          </div>
          <div class="share" id="knock-share">
            <div class="close-wrap clearfix"><a class="close" id="knock-share-close" href="javascript:void(0)"></a>
            </div>
            <p>Sorry, your chance had run out. But you can share this webpage with #DRmare to your Facebook or Twitter
              and get one more chance to knock.</p>
            <div class="share-box">
              <a class="share-facebook" href="javascript:void(0)"
                onclick="shareFacebook('https://www.drmare.com/special/2020-halloween-sales/', 'Join DRmare 2020 Halloween Sales - Up to 60% off special offers. Time is limited. Go for a multimedia tool you desire and save a lot.');"><img
                  src="./images/interaction/share/facebook.png" ga-type="special" ga-ec="2020Halloween"
                  ga-ea="share-facebook" alt="share facebook"></a>
              <a class="share-twitter" href="javascript:void(0)"
                onclick="shareTwitter('https://www.drmare.com/special/2020-halloween-sales/', 'Join DRmare 2020 Halloween Sales - Up to 60% off special offers. Time is limited. Go for a multimedia tool you desire and save a lot.');"><img
                  src="./images/interaction/share/twitter.png" ga-type="special" ga-ec="2020Halloween"
                  ga-ea="share-twitter" alt="share twitter"></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="award">
      <div class="container">
        <div class="content" id="award">
          <div class="warp">
            <div class="award-item">storyc...@gmail.com Spotify Music Converter Single License</div>
            <div class="award-item">clubmi...@outlook.com Audio Converter Single License</div>
          </div>
        </div>
      </div>
    </div>

    <div class="sp-prd">
      <h2 id="audiocapture">
        <img src="./images/module1/title.png" alt="pic">
      </h2>
      <div class="container">
        <div class="content">
          <div class="layout">
            <div class="img">
              <div class="img-content">
                <picture>
                  <source type="image/webp" srcset="./images/module1/mac.png">
                  <img src="./images/module1/mac.png" alt="mac">
                </picture>
              </div>
              <div class="price">
                <span class="price-before">$34.95</span>
                <span class="price-now">$13.98</span>
              </div>
              <div class="buy clearfix">
                <a class="win" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/drmare-audiocap-win-single-off50"><img ga-type="special"
                    ga-ec="2020Halloween" ga-ea="buy-audio-capture-win" src="./images/win.png" alt="win"><span>Buy
                    Now</span></a>
                <a class="mac" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/drmare-audiocap-mac-single-off50"><img ga-type="special"
                    ga-ec="2020Halloween" ga-ea="buy-audio-capture-mac" src="./images/mac.png" alt="mac"><span>Buy
                    Now</span></a>
              </div>
            </div>
            <div class="text">
              <ul>
                <li>Capture audios from streaming services, video websites, local media players, etc.</li>
                <li>Convert audio files to MP3, AAC, FLAC, WAV, M4A, and M4B.</li>
                <li>Keep original audio quality and full ID3 tags.</li>
                <li>Batch record multiple audio tracks at the same time.</li>
                <li>Support to edit recorded audio tracks as you want.</li>
                <li>Support to play recorded audio files on any other devices offline. <br />
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sp-prd-2">
      <h2 id="deals"><img src="./images/module2/title.png" alt="title"></h2>
      <div class="container">
        <div class="content clearfix">
          <div class="product-item">
            <div class="product-content">
              <div class="img">
                <picture>
                  <source class="img" type="image/webp" srcset="./images/module2/webp/spotify.webp">
                  <img src="./images/module2/spotify.png" alt="Music-Converter-for-spotify">
                </picture>
              </div>
              <h3><a href="../../music-converter/">Spotify Music Converter for Mac</a>/<a
                  href="../../music-converter/">Windows</a></h3>
              <p>Professional Spotify music converter to download Spotify music without premium and convert Spotify to
                MP3, FLAC, etc.</p>
              <div class="price">
                <span class="price-before">$49.95</span>
                <span class="price-now">$32.46</span>
              </div>
              <div class="buy">
                <a class="win" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/spotify-win-single-off20"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-spotify-win" src="./images/win.png" alt="win"><span>Buy
                    Now</span></a>
                <a class="mac" target="_blank" rel="nofollow" href="https://drmare.onfastspring.com/spotify-mac-single-off20
"><img ga-type="special" ga-ec="2020halloween" ga-ea="buy-spotify-mac" src="./images/mac.png" alt="mac"><span>Buy
                    Now</span></a>
              </div>
            </div>
          </div>
          <div class="product-item">
            <div class="product-content">
              <div class="img">
                <picture>
                  <source class="img" type="image/webp" srcset="./images/module2/webp/AudioConverter.webp">
                  <img src="./images/module2/AudioConverter.png" alt="audio converter">
                </picture>
              </div>
              <h3><a href="../../drm-audio-converter-for-mac/">Audio Converter for Mac</a>/<a
                  href="../../drm-audio-converter-for-win/">Windows</a></h3>
              <p>Easy-to-use audio converter to convert Apple Music, iTunes, Audible books to plain MP3, FLAC, WAV, etc.
              </p>
              <div class="price">
                <span class="price-before">$49.95</span>
                <span class="price-now">$34.96</span>
              </div>
              <div class="buy">
                <a class="win" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/drmare-audio-converter-win-off30"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-audio-converter-win" src="./images/win.png" alt="win"><span>Buy
                    Now</span></a>
                <a class="mac" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/drmare-audio-converter-mac-off30"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-audio-converter-mac" src="./images/mac.png" alt="mac"><span>Buy
                    Now</span></a>
              </div>
            </div>
          </div>
          <div class="product-item">
            <div class="product-content">
              <div class="img">
                <picture>
                  <source class="img" type="image/webp" srcset="./images/module2/webp/MediaConverter.webp">
                  <img src="./images/module2/MediaConverter.png" alt="media converter">
                </picture>
              </div>
              <h3><a href="../../m4v-converter/">M4V Converter for Mac/Windows</a></h3>
              <p>All-in-one iTunes M4V converter to rip DRM from iTunes videos and convert to plain video formats.</p>
              <div class="price">
                <span class="price-before">$54.95</span>
                <span class="price-now">$32.97</span>
              </div>
              <div class="buy">
                <a class="win" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/m4v-win-single-off20"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-now-win" src="./images/win.png" alt="win"><span>Buy Now</span></a>
                <a class="mac" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/m4v-mac-single-off20"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-now-mac" src="./images/mac.png" alt="mac"><span>Buy Now</span></a>
              </div>
            </div>
          </div>
          <div class="product-item">
            <div class="product-content">
              <div class="img">
                <picture>
                  <source class="img" type="image/webp" srcset="./images/module2/webp/Tidal.webp">
                  <img src="./images/module2/Tidal.png" alt="tidal music converter">
                </picture>
              </div>
              <h3><a href="../../tidal-music-converter/">Tidal Music Converter for Mac/Windows</a></h3>
              <p>Smart Tidal music converter to download and convert Tidal music to MP3, FLAC, WAV, M4A without touching
                original quality. </p>
              <div class="price">
                <span class="price-before">$49.95</span>
                <span class="price-now">$32.46</span>
              </div>
              <div class="buy">
                <a class="win" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/tidal-converter-win-single-off20"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-now-win" src="./images/win.png" alt="win"><span>Buy Now</span></a>
                <a class="mac" target="_blank" rel="nofollow"
                  href="https://drmare.onfastspring.com/tidal-converter-mac-single-off20"><img ga-type="special"
                    ga-ec="2020halloween" ga-ea="buy-now-mac" src="./images/mac.png" alt="mac"><span>Buy Now</span></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sp-prd-3">
      <div class="container">
        <h2 id="gift"><img src="./images/module3/title.png" alt="title"></h2>
        <div class="content">
          <p>Don't Like the Coupon Codes Above or Didn't Get a Halloween Treat? Review and Own Your Loved Product by
            Yourself Here!</p>
          <div class="how-to">
            <h3>How to Get</h3>
            <div class="icon clearfix">
              <div class="icon-item">
                <div class="img">
                  <img src="./images/module3/icon-1.png" alt="icon">
                </div>
                <p>Write a good review of our software you like. </p>
              </div>
              <div class="icon-item">
                <div class="img">
                  <img src="./images/module3/icon-2.png" alt="icon">
                </div>
                <p>Screencast the review and send it to <a href="Mailto:support@drmare.com">support@drmare.com</a>.</p>
              </div>
              <div class="icon-item">
                <div class="img">
                  <img src="./images/module3/icon-3.png" alt="icon">
                </div>
                <p>Wait for the review approved and get free license.</p>
              </div>
            </div>
            <div class="partner">
              <a class="trustpilot" href="https://www.trustpilot.com/review/drmare.com" rel="nofollow"
                target="_blank"><img src="./images/module3/Trustpilot.png" alt="Trustpilot"></a>
              <a class="sitejabber" href="https://www.sitejabber.com/reviews/drmare.com" rel="nofollow"
                target="_blank"><img src="./images/module3/sitejabber.png" alt="sitejabber"></a>
            </div>
            <div class="rule">
              <p>Rules:</p>
              <ol>
                <li>Review our software you love in up to 50 words on one of rating platforms above.</li>
                <li>After our support team verify the review, we will send you a free six-month single license of your
                  reviewed software within one month.</li>
                <li>There are 50 free license in total and everyone can get one free gift only in this session.</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- Content Wrap End -->
  <script type="text/javascript" src="../../assets/jq/jquery-3.3.1.js"></script>
  <script type="text/javascript">
    // smooth scroll
    var forEach = function (array, callback, scope) {
      for (var i = 0; i < array.length; i++) {
        callback.call(scope, i, array[i]);
      }
    };
    var anchorLinks = document.querySelectorAll("a[href^='#']");
    forEach(anchorLinks, function (index, element) {
      var target = document.getElementById(element.getAttribute("href").substring(1));
      element.addEventListener("click", function (el) {
        if (target) {
          el.preventDefault();
          //window.scrollTo(0, target.offsetTop); 
          $('html,body').animate({ scrollTop: target.offsetTop }, target.offsetTop / 3);
        }
      })
    });
  </script>

  <script type="text/javascript">
    var knockResult = '';
    var share_type = 'facebook';

    // cookie 操作方法
    /*
      name: cookie 字段名
      value: cookie 值
      min: 过期时间(分钟)
    */
    function setCookie(name, value, min) {
      var exp = new Date();
      exp.setTime(exp.getTime() + min * 60 * 1000);
      document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
    }

    function getCookie(name) {
      var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");

      if (arr = document.cookie.match(reg))
        return unescape(arr[2]);
      else
        return null;
    }

    function delCookie(name) {
      var exp = new Date();
      exp.setTime(exp.getTime() - 1);
      var cval = getCookie(name);
      if (cval != null)
        document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString();
    }

    // 获取今天还剩下多少分钟
    function getLeftMin() {
      var date = new Date();
      var hours = date.getHours();
      var minutes = date.getMinutes();
      return (minutes === 0 ? (24 - hours) * 60 : (24 - hours - 1) * 60 + (60 - minutes));
    }

    // 中将奖品轮播
    (function () {
      // 获取奖品轮播模块
      var award = document.getElementById('award');
      // 获取奖品轮播元素
      var warp = award.children[0];
      // 记录当前轮播的元素
      var pos = warp.children[0];
      // 获取轮播元素的个数
      var len = warp.children.length;
      // 获取轮播块区域的高度
      var awardH = award.offsetHeight;

      setInterval(function () {
        var top = 0;
        var moveTimer = setInterval(function () {
          top += 2;
          warp.style.marginTop = -top + 'px';

          if (top >= awardH) {
            clearInterval(moveTimer);
          }
        }, 16)
        warp.appendChild(pos);
        warp.style.marginTop = '0px';
        pos = warp.children[0];
      }, 2000)
    })()

    // 记录抽中分奖品 pid 信息
    var pid = {};

    // 版本选择
    var knock_version = $('#knock-version');
    var child = knock_version.children();
    // 记录选择的版本
    var version = 'mac';

    //绑定选择版本的事件
    for (var i = 0; i < child.length; i++) {
      child.bind('click', function () {
        if (!$(this).hasClass('check')) {
          for (var j = 0; j < child.length; j++) {
            $(child[j]).removeClass('check');
          }
          $(this).addClass('check');
          version = $(this).attr('data-version');
        }
        version = $(this).attr('data-version');
      })
    }

    // email 提交
    var form = $('#knock-form');
    // email 输入框
    var email_input = form.children()[0];
    // 提交按钮
    var email_submit = form.children()[1];
    email_submit.onclick = function () {
      if (knockResult !== 'treat') {
        return false;
      }

      if (email_submit.getAttribute('data-load') == 'loading') {
        return false;
      }

      if (email_input.value === '') {
        window.alert('Please fill in the email');
        return false;
      }

      var post_data = {
        'pid': pid[version],
        'email': email_input.value
      }

      email_submit.innerHTML = '';
      email_submit.setAttribute('data-load', 'loading');
      email_submit.innerHTML = 'Loading';

      var treatCallback = function (response) {
        console.log(response);
        // 请求完成之后的操作
        // 隐藏 领奖 的块
        knock_lucky.children()[0].style.display = 'none';
        // 显示提交成功的块
        knock_lucky.children()[1].style.display = 'block';

        // 提交按钮从 load 状态变回 正常状态
        email_submit.innerHTML = 'Submit';
        email_submit.setAttribute('data-load', '');
      };

      treat(pid[version], email_input.value, share_type, treatCallback);
    }

    // 获取随机整数
    function getRandomNum(Min, Max) {
      var Range = Max - Min;
      var Rand = Math.random();
      return (Min + Math.round(Rand * Range));
    }

    // 记录抽奖次数的 cookie 字段
    var lucky_cookie_name = 'drmare-lucky-num';
    // 抽奖次数
    var lucky_num = 1;
    if (getCookie(lucky_cookie_name)) {
      lucky_num = Number(getCookie(lucky_cookie_name));
    } else {
      setCookie(lucky_cookie_name, 1, getLeftMin());
      lucky_num = 1;
    }

    // 记录今天是否分享的 cookie 字段
    var share_cookie_name = 'drmare-share-statu';
    if (!getCookie(share_cookie_name)) {
      setCookie(share_cookie_name, false, getLeftMin());
    }

    // knock 板块
    var knock = $('#knock');
    // knock 按钮
    var knock_btn = $('#knock-btn');
    // knock 人手
    var knock_hand = $('#knock-hand');
    // knock 鬼手
    var knock_ghost_hand = $('#knock-ghost-hand');
    // knock 打开规则按钮
    var knock_rule = $('#knock-rule');
    // knock 规则 DOM 元素
    var knock_rule_detail = $('#knock-rule-detail');
    // knock 抽中奖品展示的 DOM
    var knock_lucky = $('#knock-lucky');
    // knock 未抽中奖品展示的 DOM
    var knock_trick = $('#knock-trick');
    // knock 机会用完时展示的 DOM
    var knock_share = $('#knock-share');

    // knock 规则关闭按钮
    var knock_rule_close = $('#knock-rule-close');
    // knock 分享关闭按钮
    var knock_share_close = $('#knock-share-close');
    // knock 未抽中奖关闭按钮
    var knock_trick_close = $('#knock-trick-close');
    // knock 中奖关闭按钮
    var knock_lucky_close = $('#knock-lucky-close');

    var window_onload = window.onload;
    window.onload = function () {
      if (typeof window_onload === 'function') {
        window_onload();
      }
      knock_btn.removeClass('loading');
    }

    // 规则打开和关闭
    knock_rule.bind('click', function () {
      knock_rule_detail.fadeIn();
    })
    knock_rule_close.bind('click', function () {
      knock_rule_detail.fadeOut();
    })

    // 分享的关闭
    knock_share_close.bind('click', function () {
      knock_share.fadeOut();
    })

    // 未中奖关闭
    knock_trick_close.bind('click', function () {
      knock_ghost_hand.attr('style', '');
      knock_trick.fadeOut();
    })

    // 中奖关闭
    knock_lucky_close.bind('click', function () {
      knock_ghost_hand.attr('style', '');
      knock_lucky.fadeOut();
    })


    // 随机获得奖品
    function getPrize() {
      var flag = Number(Math.random().toFixed(2));

      var pos = 0;
      if (flag < 0.33) {
        pos = 0;
      } else if (flag < 0.66) {
        pos = 1;
      } else {
        pos = 2;
      }
      // 修改获奖的图片
      knock_lucky[0].getElementsByClassName('knock-award-title')[0].innerHTML = prize[pos].title;
      // 修改获奖的标题
      knock_lucky[0].getElementsByClassName('knock-award-img')[0].src = prize[pos].img;

      return prize[pos].pid;
    }

    // 抽奖
    function getStyle(element, attr) {
      if (window.getComputedStyle) {
        return window.getComputedStyle(element, null)[attr];
      } else {
        return element.currentStyle[attr];
      }
    }
    knock_btn.bind('click', function () {
      if (knock_btn.hasClass('loading')) {
        return;
      }

      knock_btn.addClass('loading');

      var chance = Number(getCookie(lucky_cookie_name));
      if (chance > 0) {
        //  机会减少一次
        chance = chance - 1;
        setCookie(lucky_cookie_name, chance, getLeftMin());

        // ghost-hand 伸出
        knock_ghost_hand.animate({
          'bottom': '148px'
        }, 500, function () {
          setTimeout(function () {
            if (Math.random() > 0.92) {
              // 中奖
              knockResult = 'treat';
              pid = getPrize();
              knock_lucky.fadeIn();
            } else {
              // 未中奖
              knockResult = 'trick';

              // 随机显示恶作剧
              var trick_message = trick_messages[getRandomNum(0, trick_messages.length - 1)];
              knock_trick.find('p').html(trick_message);
              knock_trick.fadeIn();
              knock_trick.addClass('wow-you');
            }

            knock_btn.removeClass('loading');
          }, 500);
        })
      } else {
        knock_share.fadeIn();
      }

    });

    knock_btn.bind('mousedown', function () {
      var marginLeft = getStyle(knock_hand[0], 'margin-left');
      var marginTop = getStyle(knock_hand[0], 'margin-top');
      knock_hand.css({
        'marginLeft': Number(marginLeft.substring(0, marginLeft.length - 2)) - 15 + 'px',
        'marginTop': Number(marginTop.substring(0, marginTop.length - 2)) - 15 + 'px'
      })
    });

    knock_btn.bind('mouseup', function () {
      knock_hand.attr('style', '');
    });
    knock_btn.bind('mouseleave', function () {
      knock_hand.attr('style', '');
    });

    function treat(pid, email, share_type, callback) {
      var ga_cid = getMyCookie('_ga');
      $.post('https://www.drmare.com/api/share/coupon',
        { email: email, name: 'drmare-2020-halloween', share_type: share_type, ga_cid: ga_cid, code: pid },
        function (response) {
          if (response.status == true) {
            callback(response)
            return false;
          }

          if (response.message) {
            alert(response.message);
            location.reload();
          }
          else {
            alert(response);
            location.reload();
          }
          return false;
        }
      ).fail(function (respond) {
        alert('request failed!');
        location.reload();
      });
    }
  </script>

  <script>
    window.fbAsyncInit = function () {
      FB.init({
        appId: '1893367307425397',
        autoLogAppEvents: true,
        xfbml: true,
        version: 'v6.0'
      });
    };
  </script>

  <script type="text/javascript">
    var share_type = "facebook";
    var coupon = 'AUEUKKWE';

    var trick_messages = [
      'A candy a day keeps the monsters away.',
      'I am guilty of eating candy in cold blood.',
      'I wave my wand and put on my cape and wish you lots of treats and success coming your way. Happy Halloween!',
      'This letter is sealed with a vampire kiss and bite.',
      'Happy Halloween! Time to carve out the pumpkin, bring out the candies and let’s get sugar high.',
      'Wishing you an eerie, spooky, hair-raising, spell-binding Halloween!',
      'Have a horrifying, magical, blood-curdling, and candy-filled bag Halloween!',
      'Let the goosebumps spread and the hairs stand up on Halloween and let the candy fill your dreams.'
    ];

    function shareFacebook(url) {
      FB.ui({
        method: 'share',
        href: url
      }, function (response) {
        if (response && !response.error_message) {

          if (!JSON.parse(getCookie(share_cookie_name))) {
            setCookie(lucky_cookie_name, Number(getCookie(lucky_cookie_name)) + 1, getLeftMin());
          }
          setCookie(share_cookie_name, true, getLeftMin());
          knock_share.fadeOut();
          knock_rule.fadeIn();

        } else {
          showError();
        }
      });
      /*FB.ui({
        method: 'share_open_graph',
        action_type: 'og.likes',
        action_properties: JSON.stringify({
        object: url,
        })
      }, function(response){
        showCoupon('facebook');
      });*/
    }
    /***********twitter**************/
    function shareTwitter(url, descr) {
      var w = 450;
      var h = 600;
      var left = Number((screen.width / 2) - (w / 2));
      var top = Number((screen.height / 2) - (h / 2));
      var ttsh = window.open("https://twitter.com/intent/tweet?url=" + encodeURIComponent(url) + "&text=" + encodeURIComponent(descr) + "", 'tweet', 'height=' + w + ',width=' + h + ',top=' + top + ',left=' + left + '');
      var timer = setInterval(function () {
        console.log(ttsh.closed);
        if (ttsh.closed) {
          clearInterval(timer);

          if (!JSON.parse(getCookie(share_cookie_name))) {
            setCookie(lucky_cookie_name, Number(getCookie(lucky_cookie_name)) + 1, getLeftMin());
          }
          setCookie(share_cookie_name, true, getLeftMin());
          knock_share.fadeOut();
          knock_rule.fadeIn();
        }
      }, 600);
    }
    /**********pinterest***********/
    function sharePinterest(url, desc, coverImage) {
      var w = 850;
      var h = 500;
      var left = Number((screen.width / 2) - (w / 2));
      var top = Number((screen.height / 2) - (h / 2));
      var share_url = "https://www.pinterest.com/pin/create/button/?url=" + encodeURIComponent(url) +
        "&media=" + encodeURIComponent(coverImage) +
        "&description=" + encodeURIComponent(desc);
      var ttsh = window.open(share_url, 'Pinterest', 'height=' + h + ',width=' + w + ',top=' + top + ',left=' + left + '');
      var timer = setInterval(function () {
        if (ttsh.closed) {
          clearInterval(timer);
          // showCoupon('pinterest');
          openEmail('pinterest');
        }
      }, 600);
    }

    function showCoupon(type) {
      share_type = type;
      $('.share-box .share-channel').hide();
      $('.share-coupon').text(coupon);
      $('.share-box .share-div').show();
    }

    function openEmail(type) {
      share_type = type;
      $('#share-btn-group').hide();
      $('#form-email-box').show();
    }

    function showError() {
      alert('It seems sharing failed, please try again to get one more chance to knock.');
      return false;
    }

    function getCoupon(coupon) {
      $('.share-div .share-coupon').text(coupon);
    }

    //写cookies
    function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
      var expires = "expires=" + d.toGMTString();
      document.cookie = cname + "=" + cvalue + "; " + expires;
    }
    function getCookie(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function myBrowser() {
      var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
      var isOpera = userAgent.indexOf("Opera") > -1;
      if (isOpera) {
        return "Opera"
      }; //判断是否Opera浏览器
      if (userAgent.indexOf("Firefox") > -1) {
        return "FF";
      } //判断是否Firefox浏览器
      if (userAgent.indexOf("Chrome") > -1) {
        return "Chrome";
      }
      if (userAgent.indexOf("Safari") > -1) {
        return "Safari";
      } //判断是否Safari浏览器
      if (userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera) {
        return "IE";
      }; //判断是否IE浏览器
    }

    function getMyCookie(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
      }
      return "";
    }

    function charToUnicode(str) {
      var temp;
      var i = 0;
      var r = '';
      return r;
    }
    function unicodeToChar(str) {
      return eval("'" + str + "'");
    }

    // js操作入口
    function commonLoaded() {
      var htmlObj = document.documentElement;
      htmlObj.setAttribute('data-useragent', myBrowser());
      htmlObj.setAttribute('data-platform', navigator.platform);

      /*  $('.form-box form').submit(function(){
          var $that = $(this);
          if($that.attr('data-loading') === 'posting') {
            return false;
          }
          var ga_cid = getMyCookie('_ga');
          $that.attr('data-loading', 'posting');
          var email = $that.find('input[name="email"]').val();
          var $submit = $that.find('.submit');
          $submit.text('Loading...');
          
          $.post('https://www.drmare.com/api/share/coupon', 
            {email: email, name: 'drmare-halloween-2020', share_type: share_type, ga_cid: ga_cid}, 
            function(response){
              $that.removeAttr('data-loading').text('Submit');
      
              if(response.status == true) {
                $("#form-email-box").hide();
                getCoupon(response.coupon);
                $(".share-div").show();
                return false;
              }
      
              if(response.message) {
                alert(response.message);
                location.reload();
              }
              else {
                alert(response);
                location.reload();
              }
              return false;
            }
          ).fail(function(respond) {
            alert('request failed!');
            location.reload();
          });
          return false;
        });*/
    }
  </script>
  <script>
    function loadScript(id, url, callback) {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.id = 'script-' + id;
      script.src = url;
      script.async = true;
      var m = document.getElementsByTagName('script')[0];
      var loaded;
      m.parentNode.insertBefore(script, m);
      if (typeof callback === 'function') {
        script.onload = script.onreadystatechange = function () {
          if (!loaded && (!script.readyState || /loaded|complete/.test(script.readyState))) {
            script.onload = script.onreadystatechange = null;
            loaded = true;
            callback();
          }
        }
      } else if (typeof callback === 'string' && typeof window[callback] === 'function') {
        window[callback]();
      }
    }
  </script>
  <!-- Scripts BEGIN -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'AW-781913878');
  </script>
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
  <div class="tkApp-loadJS" data-url="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58f41c9ebf9a4648"
    data-delay="8500"></div>
  <!-- Scripts END -->
  <!-- #EndLibraryItem -->
</body>

</html>